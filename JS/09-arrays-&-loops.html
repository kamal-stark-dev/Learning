<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Arrays and Loops</title>
    <style>
      body {
        font-family: Arial, Helvetica, sans-serif;
      }
    </style>
  </head>
  <body>
    <p>To Do List</p>
    <input
      type="text"
      placeholder="Enter task"
      class="task-input"
      onkeydown="handleKeyDown(event);"
    />
    <button onclick="addTask();">Add Task</button>
    <div class="js-todo-tasks"></div>

    <!-- --------------------------------------- -->

    <script>
      // array - type of data that represent list of values
      let my_array = [10, 20, 30];
      console.log(my_array);

      // accessing the first value in array (zero-indexed ==> starts with the index 0)
      console.log(my_array[0]);

      // change value in array
      my_array[1] = 15;
      console.log(my_array[1]);

      // an array can have multiple types of items
      let array_2 = [10, "text", true, { item: "socks" }, [1, 2, 3]];

      // typeof array - object
      console.log("typeof [1, 2, 3]:", typeof [1, 2, 3]);

      // to specifically check if something is array or not use
      console.log('Array.isArray("apple"):', Array.isArray("apple"));
      console.log("Array.isArray([1, 2, 3]):", Array.isArray([1, 2, 3]));

      // length of array
      console.log("length of [1, 2, 3, 4, 5] is", [1, 2, 3, 4, 5].length);

      my_array = [1, 2, 3];
      my_array.push(4); // to add more items in the end of array
      console.log("array after pushing:", my_array);

      // remove value(s) from the array
      my_array.splice(0, 1); // (index, count)
      console.log("array after splice:", my_array);

      // arrays are references like objects
      const array1 = [1, 2, 3];
      const array2 = array1;
      const array3 = array1.slice(); // avoid referencing issue
      array2.push(4);
      console.log(`array1: ${array1}
array2: ${array2}
array3: ${array3}`);

      // destructuring
      let [firstValue, secondValue] = [1, 2, 3, 4, 5];

      // ------- loops -------
      /*
      let i = 1;
      while (i <= 5) {
        console.log(i);
        i++;
      }
      */
      // i -> loop variable, i <= 5 -> loop condition, {...} -> loop body, i++ -> increment step

      /*
      for (let i = 1; i <= 5; i++) {
        console.log(i);
      }
      */

      // break and continue in loops
      /*
      for (let i = 0; i <= 10; i++) {
        if (i === 3) continue; // skip this iteration
        if (i === 8) break; // stop the loop
        console.log(i);
      }
      */

      /*
      let i = 1;
      while (i <= 10) {
        if (i % 3 === 0) {
          i++; // we need to add this manually or bad things will happen :(
          continue;
        }
        console.log(i);
        i++;
      }
     */

      // looping through an array
      let fruits = ["apple", "banana", "orange", "neural networks", "gotcha"];

      for (let i = 0; i < fruits.length; i++) {
        console.log(fruits[i]);
      }

      // let's make a function which prints the sum of all the elements of an array
      my_array = [2, 4, 5, 1];
      let totalSum = 0;
      for (let i = 0; i < my_array.length; i++) {
        totalSum += my_array[i];
      }
      console.log("sum of elements of my_array is", totalSum);

      // a function that prints the min and max elements in an array
      function minMax(nums) {
        if (nums.length == 0) return [null, null];

        let minElement = nums[0],
          maxElement = nums[0];
        for (let i = 0; i < nums.length; i++) {
          if (nums[i] < minElement) minElement = nums[i];
          else if (nums[i] > maxElement) maxElement = nums[i];
        }
        return [minElement, maxElement];
      }

      let [minElement, maxElement] = minMax([]);
      console.log(`Min: ${minElement}\nMax: ${maxElement}`);

      [minElement, maxElement] = minMax([-2, 3, -5, 7, 10]);
      console.log(`Min: ${minElement}\nMax: ${maxElement}`);

      // ----------------------------------------------------------------------------------------------------- //

      // TO DO LIST
      let taskInput = document.querySelector(".task-input");
      let tasks = [];

      // show tasks
      renderTasks();

      function addTask() {
        let task = taskInput.value;

        if (task === "") {
          return;
        }
        tasks.push(task);
        taskInput.value = "";
        console.log(tasks);
        // show tasks
        renderTasks();
      }

      function renderTasks() {
        let todoListHTML = ``;
        for (let i = 0; i < tasks.length; i++) {
          const task = tasks[i];
          const taskHTML = `<p>${task}</p>`;
          todoListHTML += taskHTML;
        }
        document.querySelector(".js-todo-tasks").innerHTML = todoListHTML;
      }

      function handleKeyDown(event) {
        if (event.key === "Enter") {
          addTask();
        }
      }
    </script>
  </body>
</html>
