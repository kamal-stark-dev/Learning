<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Rock Paper Scissors</title>
  </head>
  <body>
    <p>Rock Paper Scissors</p>
    <button onclick="playerMove = `rock`; playGame(playerMove);">Rock</button>
    <button onclick="playerMove = `paper`; playGame(playerMove);">Paper</button>
    <button onclick="playerMove = `scissors`; playGame(playerMove);">
      Scissors
    </button>

    <p class="js-current-result"></p>
    <p class="js-current-moves"></p>
    <p class="js-score"></p>

    <button
      onclick="score.wins = 0; score.losses = 0; score.ties = 0; localStorage.removeItem('score'); updateScoreElement();"
    >
      Reset Score
    </button>

    <script>
      // rock paper scissors

      let score = JSON.parse(localStorage.getItem("score")) || {
        wins: 0,
        losses: 0,
        ties: 0,
      }; // gives default value of 0, 0, 0.

      let scoreElement = document.querySelector(".js-score");
      let currentResultElement = document.querySelector(".js-current-result");
      let currentMovesElement = document.querySelector(".js-current-moves");

      updateScoreElement();

      function updateScoreElement() {
        scoreElement.innerHTML = `Wins: ${score.wins} Losses: ${score.losses} Ties: ${score.ties}`;
      }

      function showCurrentMoves(userMove, computerMove) {
        currentMovesElement.innerHTML = `Your Move: ${userMove} - Computer's Move:${computerMove}`;
      }

      function showCurrentResult(result) {
        currentResultElement.innerHTML = result;
      }

      function pickComputerMove() {
        let computerMove = ``;
        const randomNumber = Math.random(); // 0 <= num < 1

        if (randomNumber >= 0 && randomNumber < 1 / 3) computerMove = "rock";
        else if (randomNumber >= 1 / 3 && randomNumber < 2 / 3)
          computerMove = "paper";
        else computerMove = "scissors";

        return computerMove;
      }

      function playGame(playerMove) {
        const computerMove = pickComputerMove();
        let result = "";

        if (playerMove === "rock") {
          if (computerMove === "rock") result = "It's a Tie";
          else if (computerMove === "paper") result = "You Lose";
          else if (computerMove === "scissors") result = "You Win";
        } else if (playerMove === "paper") {
          if (computerMove === "paper") result = "It's a Tie";
          else if (computerMove === "scissors") result = "You Lose";
          else if (computerMove === "rock") result = "You Win";
        } else if (playerMove === "scissors") {
          if (computerMove === "scissors") result = "It's a Tie";
          else if (computerMove === "rock") result = "You Lose";
          else if (computerMove === "paper") result = "You Win";
        }

        if (result === "You Win") score.wins++;
        else if (result === "You Lose") score.losses++;
        else if (result === "It's a Tie") score.ties++;

        localStorage.setItem("score", JSON.stringify(score));

        // show result on page
        showCurrentResult(result);

        // show user's and computer's moves
        showCurrentMoves(playerMove, computerMove);

        // update score on page
        updateScoreElement();

        // alert(
        //   `Your Move: ${playerMove}, Computer Move: ${computerMove}.\n${result}!!\nWins: ${score.wins} Losses: ${score.losses} Ties: ${score.ties}`
        // );
      }
    </script>
  </body>
</html>
